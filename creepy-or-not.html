<!DOCTYPE html - This activity was designed with the help of Claude.ai>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy Spectrum: Is This Creepy?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .instructions {
            background: #e8f4f8;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
        }

        .instructions h3 {
            color: #2980b9;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .instructions ul {
            margin-left: 20px;
            line-height: 1.8;
            color: #34495e;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .mode-btn {
            padding: 15px 30px;
            border: 3px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .mode-btn.active {
            background: #3498db;
            color: white;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .scenario-counter {
            font-size: 1.3em;
            color: #2c3e50;
            font-weight: bold;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .scenario-display {
            background: #f8f9fa;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            border: 3px solid #3498db;
        }

        .scenario-text {
            font-size: 1.8em;
            color: #2c3e50;
            line-height: 1.6;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .scenario-category {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 15px;
        }

        .cat-surveillance {
            background: #e74c3c;
            color: white;
        }

        .cat-analysis {
            background: #f39c12;
            color: white;
        }

        .cat-intervention {
            background: #3498db;
            color: white;
        }

        .cat-commercial {
            background: #9b59b6;
            color: white;
        }

        .spectrum-container {
            margin: 40px 0;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .spectrum-visual {
            height: 80px;
            background: linear-gradient(to right, #27ae60, #f1c40f, #e67e22, #e74c3c);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            cursor: pointer;
        }

        .spectrum-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .spectrum-label {
            font-weight: bold;
            font-size: 1.1em;
        }

        .label-helpful {
            color: #27ae60;
        }

        .label-neutral {
            color: #f39c12;
        }

        .label-creepy {
            color: #e74c3c;
        }

        .voting-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .vote-btn {
            padding: 20px;
            border: 3px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            text-align: center;
        }

        .vote-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .vote-helpful {
            background: #27ae60;
            color: white;
        }

        .vote-neutral {
            background: #f39c12;
            color: white;
        }

        .vote-concerning {
            background: #e67e22;
            color: white;
        }

        .vote-creepy {
            background: #e74c3c;
            color: white;
        }

        .results-container {
            display: none;
            margin-top: 30px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .results-container.show {
            display: block;
        }

        .results-chart {
            margin: 20px 0;
        }

        .result-bar-container {
            margin: 15px 0;
        }

        .result-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .result-bar {
            height: 40px;
            border-radius: 8px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            padding-left: 15px;
            color: white;
            font-weight: bold;
        }

        .context-reveal {
            display: none;
            background: #fff3cd;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #f39c12;
        }

        .context-reveal.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .context-reveal h4 {
            color: #d68910;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .context-scenarios {
            display: grid;
            gap: 15px;
        }

        .context-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #e74c3c;
        }

        .context-item.positive {
            border-left-color: #27ae60;
        }

        .discussion-prompt {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #3498db;
        }

        .discussion-prompt h4 {
            color: #2980b9;
            margin-bottom: 10px;
        }

        .discussion-prompt ul {
            margin-left: 20px;
            line-height: 1.8;
            color: #34495e;
        }

        .summary-section {
            display: none;
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .summary-section.show {
            display: block;
        }

        .summary-section h2 {
            text-align: center;
            margin-bottom: 30px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .summary-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            color: #2c3e50;
        }

        .summary-card h4 {
            color: #3498db;
            margin-bottom: 10px;
        }

        .key-takeaways {
            background: #d5f4e6;
            padding: 25px;
            border-radius: 12px;
            margin-top: 30px;
            border-left: 5px solid #27ae60;
        }

        .key-takeaways h3 {
            color: #1e8449;
            margin-bottom: 15px;
        }

        .key-takeaways ul {
            margin-left: 20px;
            line-height: 2;
            color: #2c3e50;
        }

        .export-section {
            margin-top: 30px;
            text-align: center;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .scenario-text {
                font-size: 1.3em;
            }

            .controls {
                flex-direction: column;
            }

            .voting-buttons {
                grid-template-columns: 1fr;
            }
        }

        .start-screen {
            text-align: center;
            padding: 60px 40px;
        }

        .start-screen h2 {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .start-screen p {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-bottom: 40px;
            line-height: 1.8;
        }

        .start-btn {
            padding: 20px 50px;
            font-size: 1.3em;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.3);
            transition: all 0.3s;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîí The Privacy Spectrum</h1>
        <p class="subtitle">Is This Creepy? Exploring Analytics Ethics in Education</p>

        <div class="instructions">
            <h3>üìã Activity Instructions:</h3>
            <ul>
                <li><strong>Choose your mode:</strong> Classroom voting or Individual reflection</li>
                <li><strong>Read each scenario</strong> carefully and consider your gut reaction</li>
                <li><strong>Vote on the spectrum:</strong> From "Helpful" to "Creepy/Invasive"</li>
                <li><strong>See class results</strong> and discuss different perspectives</li>
                <li><strong>Discover context</strong> that might change your opinion</li>
                <li><strong>Reflect:</strong> What makes something feel supportive vs. surveillant?</li>
            </ul>
        </div>

        <div id="startScreen" class="start-screen">
            <h2>Welcome to the Privacy Spectrum Activity</h2>
            <p>
                You'll evaluate 10 real-world learning analytics scenarios and decide where they fall
                on the spectrum from helpful to invasive. There are no right answers - this activity
                is designed to surface diverse perspectives and spark meaningful discussion about
                privacy, consent, and ethics in educational technology.
            </p>
            <button class="start-btn" onclick="startActivity()">üöÄ Start Activity</button>
        </div>

        <div id="mainActivity" class="hidden">
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setMode('classroom')" id="classroomBtn">
                    üë• Classroom Mode (Live Voting)
                </button>
                <button class="mode-btn" onclick="setMode('individual')" id="individualBtn">
                    üßë Individual Mode (Self-Paced)
                </button>
            </div>

            <div class="controls">
                <div class="scenario-counter">
                    Scenario <span id="currentScenario">1</span> of <span id="totalScenarios">10</span>
                </div>
                <div>
                    <button class="btn btn-warning" onclick="prevScenario()" id="prevBtn">‚¨ÖÔ∏è Previous</button>
                    <button class="btn btn-primary" onclick="nextScenario()" id="nextBtn">Next ‚û°Ô∏è</button>
                    <button class="btn btn-danger" onclick="resetActivity()">üîÑ Reset</button>
                </div>
            </div>

            <div class="scenario-display" id="scenarioDisplay">
                <div class="scenario-text" id="scenarioText"></div>
                <div class="scenario-category" id="scenarioCategory"></div>
            </div>

            <div class="spectrum-container">
                <div class="spectrum-labels">
                    <span class="spectrum-label label-helpful">üòä Helpful & Supportive</span>
                    <span class="spectrum-label label-neutral">ü§î Neutral / Depends</span>
                    <span class="spectrum-label label-creepy">üò∞ Creepy & Invasive</span>
                </div>

                <div class="voting-buttons">
                    <button class="vote-btn vote-helpful" onclick="vote('helpful')">
                        üòä Helpful<br><small>Supportive & ethical</small>
                    </button>
                    <button class="vote-btn vote-neutral" onclick="vote('neutral')">
                        ü§î Neutral<br><small>Context matters</small>
                    </button>
                    <button class="vote-btn vote-concerning" onclick="vote('concerning')">
                        üòü Concerning<br><small>Privacy questions</small>
                    </button>
                    <button class="vote-btn vote-creepy" onclick="vote('creepy')">
                        üò∞ Creepy<br><small>Invasive surveillance</small>
                    </button>
                </div>
            </div>

            <div id="resultsContainer" class="results-container">
                <h3>üìä Class Votes:</h3>
                <div class="results-chart" id="resultsChart"></div>
                <button class="btn btn-warning" onclick="showContext()" id="contextBtn">
                    üí° Reveal Context That Might Change Your Mind
                </button>
            </div>

            <div id="contextReveal" class="context-reveal">
                <h4>üîÑ Consider These Additional Contexts:</h4>
                <div class="context-scenarios" id="contextScenarios"></div>
                
                <div class="discussion-prompt">
                    <h4>üí¨ Discussion Questions:</h4>
                    <ul id="discussionQuestions"></ul>
                </div>
            </div>
        </div>

        <div id="summarySection" class="summary-section">
            <h2>üìà Activity Summary & Key Insights</h2>
            
            <div class="summary-grid">
                <div class="summary-card">
                    <h4>Most Controversial</h4>
                    <p id="mostControversial">Loading...</p>
                </div>
                <div class="summary-card">
                    <h4>Most Agreed Upon</h4>
                    <p id="mostAgreed">Loading...</p>
                </div>
                <div class="summary-card">
                    <h4>Scenarios Evaluated</h4>
                    <p id="scenariosCompleted">0 of 10</p>
                </div>
            </div>

            <div class="key-takeaways">
                <h3>üéØ Key Takeaways:</h3>
                <ul>
                    <li><strong>Context is everything:</strong> The same data collection can be supportive or surveillant depending on its use and purpose</li>
                    <li><strong>Privacy is relational:</strong> It's not about hiding information, but about appropriate use within specific contexts</li>
                    <li><strong>No universal standards:</strong> People have legitimately different comfort levels and priorities around data and privacy</li>
                    <li><strong>Purpose limitation matters:</strong> Data collected for one purpose shouldn't automatically be repurposed</li>
                    <li><strong>Power dynamics shift ethics:</strong> Student "consent" in an institutional context is complicated by power imbalances</li>
                    <li><strong>Transparency ‚â† Permission:</strong> Knowing you're being tracked doesn't make the tracking ethical</li>
                </ul>
            </div>

            <div class="export-section">
                <button class="btn btn-success" onclick="exportResults()">üì• Export Discussion Summary (PDF)</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        // Scenario data
        const scenarios = [
            {
                id: 1,
                text: "Learning Management System tracks which pages you visit in your online textbook",
                category: "Analysis",
                categoryClass: "cat-analysis",
                contexts: [
                    {
                        text: "Data is used to identify which sections confuse students and improve the textbook",
                        positive: true
                    },
                    {
                        text: "Instructors use this data to determine who is 'actually reading' and grade accordingly",
                        positive: false
                    },
                    {
                        text: "Marketing team uses reading patterns to optimize textbook pricing tiers",
                        positive: false
                    }
                ],
                questions: [
                    "Is there a difference between tracking behavior and tracking learning?",
                    "Who benefits most from this data collection?",
                    "Should students be able to opt out of tracking while still accessing materials?"
                ]
            },
            {
                id: 2,
                text: "System automatically flags when you access campus mental health resources or watch videos about depression/anxiety",
                category: "Surveillance",
                categoryClass: "cat-surveillance",
                contexts: [
                    {
                        text: "Flag triggers automatic email from counseling center offering support services",
                        positive: true
                    },
                    {
                        text: "Flag is stored in your permanent academic record accessible by advisors and administrators",
                        positive: false
                    },
                    {
                        text: "Flag is shared with campus police as part of 'threat assessment' protocols",
                        positive: false
                    }
                ],
                questions: [
                    "Does the potential benefit of intervention justify the privacy violation?",
                    "Could flagging students seeking help actually discourage them from accessing resources?",
                    "Who should have access to information about mental health resource usage?"
                ]
            },
            {
                id: 3,
                text: "Webcam proctoring software records your face, tracks eye movements, and monitors your room during exams",
                category: "Surveillance",
                categoryClass: "cat-surveillance",
                contexts: [
                    {
                        text: "Required for online courses to 'ensure academic integrity' - no alternative offered",
                        positive: false
                    },
                    {
                        text: "Students can opt for in-person proctoring instead with reasonable accommodation",
                        positive: true
                    },
                    {
                        text: "Recordings are analyzed by AI and retained indefinitely for 'quality assurance'",
                        positive: false
                    }
                ],
                questions: [
                    "Is the privacy invasion proportional to the cheating risk?",
                    "What about students without private spaces or those sharing housing?",
                    "Does this normalize surveillance as a condition of education?"
                ]
            },
            {
                id: 4,
                text: "AI analyzes your writing style in discussion posts and essays to detect whether you used ChatGPT or other AI tools",
                category: "Analysis",
                categoryClass: "cat-analysis",
                contexts: [
                    {
                        text: "System provides feedback on writing development and flags unusual stylistic changes for conversation",
                        positive: true
                    },
                    {
                        text: "Automatic zero grade for any essay flagged as 'likely AI-generated' with no appeal process",
                        positive: false
                    },
                    {
                        text: "System has 15% false positive rate, disproportionately flagging international students and non-native English speakers",
                        positive: false
                    }
                ],
                questions: [
                    "Is detecting AI use a legitimate educational goal?",
                    "What's the acceptable false positive rate when academic integrity is at stake?",
                    "Should students know the detection criteria so they can avoid false flags?"
                ]
            },
            {
                id: 5,
                text: "Platform recommends study partners and group members based on analysis of your learning patterns, strengths, and participation history",
                category: "Intervention",
                categoryClass: "cat-intervention",
                contexts: [
                    {
                        text: "Recommendations are suggestions students can accept or ignore, with full control",
                        positive: true
                    },
                    {
                        text: "Instructors use these recommendations to assign permanent project teams",
                        positive: false
                    },
                    {
                        text: "Algorithm specifically pairs high-performing with low-performing students to 'balance' groups",
                        positive: false
                    }
                ],
                questions: [
                    "Does algorithmic matching reduce or increase student agency?",
                    "Could this prevent students from forming organic relationships?",
                    "What biases might be encoded in 'optimal' matching criteria?"
                ]
            },
            {
                id: 6,
                text: "System analyzes discussion forum posts using sentiment analysis and natural language processing to detect emotional distress or crisis language",
                category: "Intervention",
                categoryClass: "cat-intervention",
                contexts: [
                    {
                        text: "Alerts trigger wellness check-in from trained counselor with appropriate expertise",
                        positive: true
                    },
                    {
                        text: "System has high false positive rate and students complain about unwanted 'welfare' checks",
                        positive: false
                    },
                    {
                        text: "Students stop posting honestly in forums, knowing their language is being analyzed",
                        positive: false
                    }
                ],
                questions: [
                    "Is it ethical to analyze private conversations for mental health signals?",
                    "What's the appropriate response threshold - when is intervention warranted?",
                    "Could surveillance undermine the very spaces meant to foster authentic expression?"
                ]
            },
            {
                id: 7,
                text: "Early warning system predicts which students will drop out or fail, automatically alerting advisors when risk exceeds 60%",
                category: "Intervention",
                categoryClass: "cat-intervention",
                contexts: [
                    {
                        text: "Advisors use predictions to prioritize outreach and offer targeted support resources",
                        positive: true
                    },
                    {
                        text: "Students never know they've been flagged; intervention happens behind their backs",
                        positive: false
                    },
                    {
                        text: "Instructors unconsciously lower expectations for flagged students, creating self-fulfilling prophecy",
                        positive: false
                    }
                ],
                questions: [
                    "Should students know when they're predicted to fail?",
                    "Can prediction itself change the outcome it's predicting?",
                    "Is preventable harm worse than the stigma of being labeled 'at risk'?"
                ]
            },
            {
                id: 8,
                text: "University sells anonymized student learning analytics data to educational technology companies for 'research and development'",
                category: "Commercial",
                categoryClass: "cat-commercial",
                contexts: [
                    {
                        text: "Revenue generated funds financial aid and scholarship programs for students",
                        positive: true
                    },
                    {
                        text: "'Anonymized' data can be re-identified when combined with other public datasets",
                        positive: false
                    },
                    {
                        text: "Students were never informed this would happen; consent was buried in 40-page terms of service",
                        positive: false
                    }
                ],
                questions: [
                    "Do students 'own' their learning data?",
                    "Is informed consent possible when enrollment requires agreeing to data policies?",
                    "Does the benefit (revenue for aid) justify the privacy trade-off?"
                ]
            },
            {
                id: 9,
                text: "Campus WiFi system tracks your physical location across campus buildings and logs which websites you visit on the university network",
                category: "Surveillance",
                categoryClass: "cat-surveillance",
                contexts: [
                    {
                        text: "Data used only for aggregate planning (e.g., where to expand WiFi coverage, optimize building hours)",
                        positive: true
                    },
                    {
                        text: "Individual location data retained for 5 years and accessible to campus security and administrators",
                        positive: false
                    },
                    {
                        text: "Data reveals your advisor dashboard sees you spent 3 hours in the bar last Thursday",
                        positive: false
                    }
                ],
                questions: [
                    "What's the difference between aggregate patterns and individual tracking?",
                    "Should there be a 'right to digital anonymity' on campus networks?",
                    "Where does institutional security interest end and privacy begin?"
                ]
            },
            {
                id: 10,
                text: "Predictive algorithm scores incoming applicants on 'likelihood of graduation' - used alongside GPA and test scores in admissions decisions",
                category: "Intervention",
                categoryClass: "cat-intervention",
                contexts: [
                    {
                        text: "Algorithm helps identify students who might succeed despite low test scores, increasing diversity",
                        positive: true
                    },
                    {
                        text: "Algorithm trained on historical data perpetuates bias against first-generation and transfer students",
                        positive: false
                    },
                    {
                        text: "Students never know they were denied admission partly due to algorithmic 'risk' score",
                        positive: false
                    }
                ],
                questions: [
                    "Should algorithms make high-stakes decisions about people's futures?",
                    "How do we balance efficiency with equity in admissions?",
                    "Is there a right to know when algorithms affect your life outcomes?"
                ]
            }
        ];

        // Game state
        let currentMode = 'classroom';
        let currentScenarioIndex = 0;
        let votes = {};
        let activityStarted = false;

        // Initialize votes object
        scenarios.forEach(s => {
            votes[s.id] = {helpful: 0, neutral: 0, concerning: 0, creepy: 0};
        });

        function startActivity() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('mainActivity').classList.remove('hidden');
            activityStarted = true;
            loadScenario();
        }

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('classroomBtn').classList.toggle('active', mode === 'classroom');
            document.getElementById('individualBtn').classList.toggle('active', mode === 'individual');
        }

        function loadScenario() {
            const scenario = scenarios[currentScenarioIndex];
            document.getElementById('scenarioText').textContent = scenario.text;
            document.getElementById('scenarioCategory').textContent = scenario.category;
            document.getElementById('scenarioCategory').className = `scenario-category ${scenario.categoryClass}`;
            document.getElementById('currentScenario').textContent = currentScenarioIndex + 1;
            document.getElementById('totalScenarios').textContent = scenarios.length;
            
            // Hide results and context initially
            document.getElementById('resultsContainer').classList.remove('show');
            document.getElementById('contextReveal').classList.remove('show');
            
            // Update button states
            document.getElementById('prevBtn').disabled = currentScenarioIndex === 0;
            document.getElementById('nextBtn').textContent = 
                currentScenarioIndex === scenarios.length - 1 ? 'View Summary üìä' : 'Next ‚û°Ô∏è';
        }

        function vote(voteType) {
            const scenario = scenarios[currentScenarioIndex];
            votes[scenario.id][voteType]++;
            
            // Show results
            displayResults();
            document.getElementById('resultsContainer').classList.add('show');
        }

        function displayResults() {
            const scenario = scenarios[currentScenarioIndex];
            const scenarioVotes = votes[scenario.id];
            const total = Object.values(scenarioVotes).reduce((a, b) => a + b, 0);
            
            if (total === 0) {
                document.getElementById('resultsChart').innerHTML = 
                    '<p style="text-align: center; color: #7f8c8d;">No votes yet. Click a button above to vote!</p>';
                return;
            }

            const resultsHTML = `
                <div class="result-bar-container">
                    <div class="result-label">
                        <span>üòä Helpful & Supportive</span>
                        <span>${scenarioVotes.helpful} votes (${Math.round(scenarioVotes.helpful/total*100)}%)</span>
                    </div>
                    <div class="result-bar" style="width: ${scenarioVotes.helpful/total*100}%; background: #27ae60;">
                        ${scenarioVotes.helpful > 0 ? scenarioVotes.helpful : ''}
                    </div>
                </div>
                <div class="result-bar-container">
                    <div class="result-label">
                        <span>ü§î Neutral / Depends</span>
                        <span>${scenarioVotes.neutral} votes (${Math.round(scenarioVotes.neutral/total*100)}%)</span>
                    </div>
                    <div class="result-bar" style="width: ${scenarioVotes.neutral/total*100}%; background: #f39c12;">
                        ${scenarioVotes.neutral > 0 ? scenarioVotes.neutral : ''}
                    </div>
                </div>
                <div class="result-bar-container">
                    <div class="result-label">
                        <span>üòü Concerning</span>
                        <span>${scenarioVotes.concerning} votes (${Math.round(scenarioVotes.concerning/total*100)}%)</span>
                    </div>
                    <div class="result-bar" style="width: ${scenarioVotes.concerning/total*100}%; background: #e67e22;">
                        ${scenarioVotes.concerning > 0 ? scenarioVotes.concerning : ''}
                    </div>
                </div>
                <div class="result-bar-container">
                    <div class="result-label">
                        <span>üò∞ Creepy & Invasive</span>
                        <span>${scenarioVotes.creepy} votes (${Math.round(scenarioVotes.creepy/total*100)}%)</span>
                    </div>
                    <div class="result-bar" style="width: ${scenarioVotes.creepy/total*100}%; background: #e74c3c;">
                        ${scenarioVotes.creepy > 0 ? scenarioVotes.creepy : ''}
                    </div>
                </div>
            `;
            
            document.getElementById('resultsChart').innerHTML = resultsHTML;
        }

        function showContext() {
            const scenario = scenarios[currentScenarioIndex];
            
            const contextsHTML = scenario.contexts.map(ctx => `
                <div class="context-item ${ctx.positive ? 'positive' : ''}">
                    ${ctx.positive ? '‚úÖ' : '‚ö†Ô∏è'} ${ctx.text}
                </div>
            `).join('');
            
            const questionsHTML = scenario.questions.map(q => `<li>${q}</li>`).join('');
            
            document.getElementById('contextScenarios').innerHTML = contextsHTML;
            document.getElementById('discussionQuestions').innerHTML = questionsHTML;
            document.getElementById('contextReveal').classList.add('show');
        }

        function nextScenario() {
            if (currentScenarioIndex < scenarios.length - 1) {
                currentScenarioIndex++;
                loadScenario();
            } else {
                showSummary();
            }
        }

        function prevScenario() {
            if (currentScenarioIndex > 0) {
                currentScenarioIndex--;
                loadScenario();
            }
        }

        function showSummary() {
            document.getElementById('mainActivity').classList.add('hidden');
            document.getElementById('summarySection').classList.add('show');
            
            // Calculate statistics
            let mostControversialScore = 0;
            let mostControversialScenario = null;
            let leastControversialScore = Infinity;
            let leastControversialScenario = null;
            let scenariosWithVotes = 0;
            
            scenarios.forEach(scenario => {
                const scenarioVotes = votes[scenario.id];
                const total = Object.values(scenarioVotes).reduce((a, b) => a + b, 0);
                
                if (total > 0) {
                    scenariosWithVotes++;
                    
                    // Calculate controversy (standard deviation of vote distribution)
                    const percentages = Object.values(scenarioVotes).map(v => v/total);
                    const mean = 0.25; // Perfect split would be 0.25 each
                    const variance = percentages.reduce((sum, p) => sum + Math.pow(p - mean, 2), 0) / 4;
                    const stdDev = Math.sqrt(variance);
                    
                    if (stdDev < mostControversialScore || mostControversialScenario === null) {
                        mostControversialScore = stdDev;
                        mostControversialScenario = scenario;
                    }
                    
                    if (stdDev > leastControversialScore) {
                        leastControversialScore = stdDev;
                        leastControversialScenario = scenario;
                    }
                }
            });
            
            document.getElementById('mostControversial').textContent = 
                mostControversialScenario ? 
                `Scenario ${mostControversialScenario.id}: ${mostControversialScenario.text.substring(0, 80)}...` : 
                'Not enough data';
                
            document.getElementById('mostAgreed').textContent = 
                leastControversialScenario ? 
                `Scenario ${leastControversialScenario.id}: ${leastControversialScenario.text.substring(0, 80)}...` : 
                'Not enough data';
                
            document.getElementById('scenariosCompleted').textContent = 
                `${scenariosWithVotes} of ${scenarios.length}`;
        }

        function resetActivity() {
            if (confirm('Are you sure you want to reset? All votes will be cleared.')) {
                currentScenarioIndex = 0;
                scenarios.forEach(s => {
                    votes[s.id] = {helpful: 0, neutral: 0, concerning: 0, creepy: 0};
                });
                document.getElementById('summarySection').classList.remove('show');
                document.getElementById('mainActivity').classList.remove('hidden');
                loadScenario();
            }
        }

        function exportResults() {
            const exportContent = document.createElement('div');
            exportContent.style.padding = '40px';
            exportContent.style.fontFamily = 'Arial, sans-serif';
            
            let html = `
                <h1 style="color: #2c3e50; text-align: center;">Privacy Spectrum Activity - Discussion Summary</h1>
                <p style="text-align: center; color: #7f8c8d; margin-bottom: 40px;">
                    Generated on ${new Date().toLocaleDateString()}
                </p>
            `;
            
            scenarios.forEach(scenario => {
                const scenarioVotes = votes[scenario.id];
                const total = Object.values(scenarioVotes).reduce((a, b) => a + b, 0);
                
                if (total > 0) {
                    html += `
                        <div style="margin-bottom: 40px; page-break-inside: avoid;">
                            <h3 style="color: #3498db;">Scenario ${scenario.id}: ${scenario.category}</h3>
                            <p style="font-size: 14px; line-height: 1.6;">${scenario.text}</p>
                            
                            <div style="margin: 20px 0;">
                                <strong>Class Votes:</strong><br>
                                üòä Helpful: ${scenarioVotes.helpful} (${Math.round(scenarioVotes.helpful/total*100)}%)<br>
                                ü§î Neutral: ${scenarioVotes.neutral} (${Math.round(scenarioVotes.neutral/total*100)}%)<br>
                                üòü Concerning: ${scenarioVotes.concerning} (${Math.round(scenarioVotes.concerning/total*100)}%)<br>
                                üò∞ Creepy: ${scenarioVotes.creepy} (${Math.round(scenarioVotes.creepy/total*100)}%)
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                <strong>Discussion Questions:</strong>
                                <ul style="margin-top: 10px;">
                                    ${scenario.questions.map(q => `<li style="margin: 8px 0;">${q}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }
            });
            
            exportContent.innerHTML = html;
            
            const opt = {
                margin: 1,
                filename: 'privacy-spectrum-discussion-summary.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            
            html2pdf().set(opt).from(exportContent).save();
        }

        // Initialize
        document.getElementById('totalScenarios').textContent = scenarios.length;
    </script>
</body>
</html>