<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Redesign Planner - Learning Analytics</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 4px;
            background: #ecf0f1;
            z-index: 0;
        }

        .progress-fill {
            position: absolute;
            top: 20px;
            left: 0;
            height: 4px;
            background: #3498db;
            z-index: 1;
            transition: width 0.3s;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ecf0f1;
            color: #95a5a6;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            border: 3px solid #ecf0f1;
            transition: all 0.3s;
        }

        .step.active .step-circle {
            background: #3498db;
            color: white;
            border-color: #3498db;
            transform: scale(1.1);
        }

        .step.completed .step-circle {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }

        .step-label {
            font-size: 0.85em;
            color: #7f8c8d;
            font-weight: 500;
        }

        .step.active .step-label {
            color: #2c3e50;
            font-weight: bold;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .section-header h2 {
            margin-bottom: 10px;
        }

        .section-header p {
            opacity: 0.9;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .form-group .hint {
            display: block;
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-style: italic;
        }

        .form-group input[type="text"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .form-group input[type="text"]:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-group textarea.large {
            min-height: 150px;
        }

        .scenario-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .scenario-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .scenario-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .scenario-card.selected {
            border-color: #3498db;
            background: #e8f4f8;
        }

        .scenario-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .scenario-card p {
            color: #555;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .checkbox-item:hover {
            background: #e8f4f8;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 3px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .checkbox-item label {
            cursor: pointer;
            flex: 1;
            font-weight: normal !important;
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .preview-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .preview-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .preview-item {
            margin-bottom: 25px;
        }

        .preview-item h4 {
            color: #2980b9;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .preview-item p {
            color: #2c3e50;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .preview-item ul {
            margin-left: 20px;
            color: #555;
        }

        .preview-item ul li {
            margin-bottom: 5px;
            line-height: 1.5;
        }

        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .export-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #ecf0f1;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .export-card:hover {
            border-color: #3498db;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .export-card .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .export-card h4 {
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .export-card p {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 5px solid #f39c12;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .warning-box strong {
            color: #d68910;
        }

        .info-box {
            background: #e8f4f8;
            border-left: 5px solid #3498db;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box strong {
            color: #2980b9;
        }

        .success-box {
            background: #d5f4e6;
            border-left: 5px solid #27ae60;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .success-box strong {
            color: #1e8449;
        }

        .character-count {
            text-align: right;
            font-size: 0.85em;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .theory-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .theory-tag {
            padding: 8px 16px;
            background: #ecf0f1;
            border: 2px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .theory-tag:hover {
            background: #e8f4f8;
        }

        .theory-tag.selected {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .progress-bar {
                flex-wrap: wrap;
            }

            .step {
                flex-basis: 33%;
                margin-bottom: 20px;
            }

            .button-group {
                flex-direction: column;
            }

            .scenario-selector {
                grid-template-columns: 1fr;
            }
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
                padding: 20px;
            }

            .progress-bar,
            .button-group,
            .export-options {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Course Redesign Planner</h1>
        <p class="subtitle">Design a Data-Informed Course Improvement</p>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
            <div class="step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Scenario</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Problem</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label">Analytics</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-circle">4</div>
                <div class="step-label">Design</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-circle">5</div>
                <div class="step-label">Theory</div>
            </div>
            <div class="step" data-step="6">
                <div class="step-circle">6</div>
                <div class="step-label">Evaluation</div>
            </div>
            <div class="step" data-step="7">
                <div class="step-circle">7</div>
                <div class="step-label">Implementation</div>
            </div>
            <div class="step" data-step="8">
                <div class="step-circle">8</div>
                <div class="step-label">Ethics</div>
            </div>
            <div class="step" data-step="9">
                <div class="step-circle">9</div>
                <div class="step-label">Review</div>
            </div>
        </div>

        <!-- Section 1: Scenario Selection -->
        <div class="section active" data-section="1">
            <div class="section-header">
                <h2>Step 1: Choose Your Scenario</h2>
                <p>Select a course context that you'll redesign using learning analytics</p>
            </div>

            <div class="scenario-selector">
                <div class="scenario-card" onclick="selectScenario('stats')">
                    <h3>üìä Statistics (Large Lecture)</h3>
                    <p><strong>Context:</strong> 200 students, twice-weekly lectures</p>
                    <p><strong>Issue:</strong> 30% never access resources, scores decline</p>
                    <p><strong>Goal:</strong> Support struggling students</p>
                </div>

                <div class="scenario-card" onclick="selectScenario('writing')">
                    <h3>‚úçÔ∏è Writing Seminar (Small)</h3>
                    <p><strong>Context:</strong> 20 students, discussion-based</p>
                    <p><strong>Issue:</strong> Same 6 students dominate, superficial peer reviews</p>
                    <p><strong>Goal:</strong> Promote equity and quality</p>
                </div>

                <div class="scenario-card" onclick="selectScenario('online')">
                    <h3>üíª Online Asynchronous</h3>
                    <p><strong>Context:</strong> Self-paced modules, flexible</p>
                    <p><strong>Issue:</strong> Bimodal engagement, 40% dropout</p>
                    <p><strong>Goal:</strong> Prevent disengagement</p>
                </div>

                <div class="scenario-card" onclick="selectScenario('workshop')">
                    <h3>üõ†Ô∏è Professional Workshop</h3>
                    <p><strong>Context:</strong> One-day skills training</p>
                    <p><strong>Issue:</strong> 60% don't apply skills after</p>
                    <p><strong>Goal:</strong> Improve transfer</p>
                </div>

                <div class="scenario-card" onclick="selectScenario('custom')">
                    <h3>üé® Custom Scenario</h3>
                    <p><strong>Use your own context</strong></p>
                    <p>Design from your teaching experience or imagination</p>
                </div>
            </div>

            <div id="customScenarioInput" style="display: none;">
                <div class="form-group">
                    <label>Describe Your Course Context</label>
                    <span class="hint">Subject, class size, format, student level</span>
                    <textarea id="customContext" placeholder="Example: Introduction to Psychology, 45 students, hybrid format, first-year undergraduates..."></textarea>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" disabled>‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 2: Problem Identification -->
        <div class="section" data-section="2">
            <div class="section-header">
                <h2>Step 2: Problem Identification</h2>
                <p>Clearly articulate what's not working and how you know</p>
            </div>

            <div class="form-group">
                <label>What's Not Working Well?</label>
                <span class="hint">Be specific about the educational problem</span>
                <textarea id="problemDescription" class="large" placeholder="Example: Students are submitting final papers that show little improvement from their drafts despite detailed feedback. Many final papers repeat the same structural and argumentative issues I identified in earlier drafts..."></textarea>
                <div class="character-count"><span id="problemCount">0</span> / 500 characters</div>
            </div>

            <div class="form-group">
                <label>How Do You Know This Is a Problem?</label>
                <span class="hint">What evidence suggests improvement is needed?</span>
                <textarea id="evidenceDescription" placeholder="Example: Comparing draft and final paper scores, I see minimal improvement (average 3-point gain on 100-point scale). Student surveys indicate confusion about how to use feedback. Many final papers show identical issues to those marked in drafts..."></textarea>
                <div class="character-count"><span id="evidenceCount">0</span> / 400 characters</div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 3: Analytics Plan -->
        <div class="section" data-section="3">
            <div class="section-header">
                <h2>Step 3: Analytics Integration Plan</h2>
                <p>Specify what data you'll collect and how you'll analyze it</p>
            </div>

            <div class="form-group">
                <label>What Data Would You Collect?</label>
                <span class="hint">Be specific about data sources and collection methods</span>
                <textarea id="dataCollection" class="large" placeholder="Example: Using Google Docs with version history enabled, I would track: (1) timestamp and nature of all edits between drafts, (2) which feedback comments correspond to changes in text, (3) time invested in revision, (4) types of changes (surface vs. substantive)..."></textarea>
                <div class="character-count"><span id="dataCount">0</span> / 500 characters</div>
            </div>

            <div class="form-group">
                <label>What Analytics Would You Apply?</label>
                <span class="hint">What methods or techniques would you use to analyze the data?</span>
                <textarea id="analyticsMethods" placeholder="Example: Revision analysis categorizing edits (grammar/mechanics, reorganization, argument development, evidence addition). Text comparison algorithms to identify changed sections. Temporal analysis of revision patterns. Correlation analysis between feedback uptake and grade improvement..."></textarea>
                <div class="character-count"><span id="analyticsCount">0</span> / 400 characters</div>
            </div>

            <div class="form-group">
                <label>How Would Insights Inform Design Decisions?</label>
                <span class="hint">Give a specific IF-THEN example</span>
                <textarea id="insightsAction" placeholder="Example: IF analytics show that 70% of revisions are surface-level editing with no structural changes, THEN I would: (1) create explicit revision workshops teaching substantive revision, (2) require revision plans before final drafts, (3) adjust feedback to emphasize higher-order concerns first..."></textarea>
                <div class="character-count"><span id="insightsCount">0</span> / 450 characters</div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 4: Design Changes -->
        <div class="section" data-section="4">
            <div class="section-header">
                <h2>Step 4: Redesign Proposal</h2>
                <p>Describe specific changes you'll make to the course</p>
            </div>

            <div class="form-group">
                <label>Specific Design Changes</label>
                <span class="hint">What will you modify, add, or remove?</span>
                <textarea id="designChanges" class="large" placeholder="Example: MODIFY: Move from 2 drafts to 3 drafts with scaffolded focus (Draft 1: argument structure, Draft 2: evidence integration, Draft 3: polish). ADD: Revision reflection memo required with each draft explaining changes made and why. ADD: In-class revision workshop demonstrating substantive revision. REMOVE: Generic end-comments; replace with targeted marginal comments..."></textarea>
                <div class="character-count"><span id="designCount">0</span> / 600 characters</div>
            </div>

            <div class="form-group">
                <label>How Do Analytics Enable/Enhance This Redesign?</label>
                <span class="hint">Connect analytics to your specific design changes</span>
                <textarea id="analyticsEnhancement" placeholder="Example: Version tracking allows me to see exactly what students change between drafts, revealing whether they're engaging with substantive vs. surface revision. This data helps me: (1) identify students who need revision strategy support early, (2) evaluate which feedback prompts lead to meaningful revision, (3) adjust workshop content based on common revision patterns..."></textarea>
                <div class="character-count"><span id="enhancementCount">0</span> / 500 characters</div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 5: Learning Theory -->
        <div class="section" data-section="5">
            <div class="section-header">
                <h2>Step 5: Theoretical Foundation</h2>
                <p>Ground your redesign in learning theory</p>
            </div>

            <div class="form-group">
                <label>Which Learning Theory Informs Your Redesign?</label>
                <span class="hint">Select all that apply (click to select/deselect)</span>
                <div class="theory-options">
                    <div class="theory-tag" onclick="toggleTheory(this, 'behaviorism')">Behaviorism</div>
                    <div class="theory-tag" onclick="toggleTheory(this, 'cognitivism')">Cognitivism</div>
                    <div class="theory-tag" onclick="toggleTheory(this, 'constructivism')">Constructivism</div>
                    <div class="theory-tag" onclick="toggleTheory(this, 'social-constructivism')">Social Constructivism</div>
                    <div class="theory-tag" onclick="toggleTheory(this, 'metacognition')">Metacognition</div>
                    <div class="theory-tag" onclick="toggleTheory(this, 'mastery')">Mastery Learning</div>
                    <div class="theory-tag" onclick="toggleTheory(this, 'zpd')">Zone of Proximal Development</div>
                    <div class="theory-tag" onclick="toggleTheory(this, 'other')">Other</div>
                </div>
            </div>

            <div class="form-group">
                <label>Explain How Theory Guides Your Design</label>
                <span class="hint">Connect theoretical principles to specific design choices</span>
                <textarea id="theoryExplanation" class="large" placeholder="Example: This redesign draws on COGNITIVE LOAD THEORY and METACOGNITION research. By scaffolding revision across three drafts with specific focus areas, I reduce cognitive load‚Äîstudents can focus on structure, then evidence, then polish, rather than trying to address everything at once. Revision reflection memos develop metacognitive awareness by requiring students to articulate their revision strategies. Research shows that explicit metacognitive prompts improve learning outcomes..."></textarea>
                <div class="character-count"><span id="theoryCount">0</span> / 500 characters</div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 6: Evaluation Plan -->
        <div class="section" data-section="6">
            <div class="section-header">
                <h2>Step 6: Evaluation Plan</h2>
                <p>Define how you'll measure success</p>
            </div>

            <div class="form-group">
                <label>How Will You Know If the Redesign Works?</label>
                <span class="hint">What evidence would indicate success?</span>
                <textarea id="evaluationCriteria" placeholder="Example: Success indicators: (1) Revision analysis shows increased substantive changes (reorganization, argument development) vs. surface changes (grammar), target 60%+ substantive revisions; (2) Final paper quality improves by 10+ points compared to historical average; (3) Student survey shows increased confidence in revision skills; (4) Feedback uptake rate increases from 40% to 70%+..."></textarea>
                <div class="character-count"><span id="evalCount">0</span> / 450 characters</div>
            </div>

            <div class="form-group">
                <label>What Specific Metrics Will You Track?</label>
                <span class="hint">Quantitative and/or qualitative measures</span>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="metric1" value="performance">
                        <label for="metric1">Student performance/grades (pre/post comparison)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="metric2" value="engagement">
                        <label for="metric2">Engagement metrics (time, completion rates, participation)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="metric3" value="survey">
                        <label for="metric3">Student surveys/feedback (experience, confidence, satisfaction)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="metric4" value="behavior">
                        <label for="metric4">Behavioral analytics (revision patterns, help-seeking, resource use)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="metric5" value="qualitative">
                        <label for="metric5">Qualitative analysis (student work quality, discourse analysis)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="metric6" value="retention">
                        <label for="metric6">Retention/persistence (dropout rates, continuation)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="metric7" value="equity">
                        <label for="metric7">Equity metrics (outcomes by student subgroup)</label>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 7: Implementation -->
        <div class="section" data-section="7">
            <div class="section-header">
                <h2>Step 7: Implementation Challenges</h2>
                <p>Anticipate barriers and plan solutions</p>
            </div>

            <div class="form-group">
                <label>What Are the Top 3 Implementation Barriers?</label>
                <span class="hint">Be realistic about constraints</span>
                <div style="display: grid; gap: 15px;">
                    <div>
                        <strong>Barrier 1:</strong>
                        <input type="text" id="barrier1" placeholder="Example: Time investment - analyzing revision data for 20+ students">
                    </div>
                    <div>
                        <strong>Barrier 2:</strong>
                        <input type="text" id="barrier2" placeholder="Example: Technical expertise - need to learn version comparison tools">
                    </div>
                    <div>
                        <strong>Barrier 3:</strong>
                        <input type="text" id="barrier3" placeholder="Example: Student resistance - may object to version tracking as surveillance">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>How Would You Address These Barriers?</label>
                <span class="hint">Specific strategies for overcoming each barrier</span>
                <textarea id="barrierSolutions" class="large" placeholder="Example: For time barrier: Create simple rubric for categorizing revisions (substantive/surface) to speed analysis. Use automated text comparison tools for initial identification, then spot-check. For technical barrier: Attend workshop on Google Docs analysis, partner with instructional designer. For student resistance: Frame as developmental tool not surveillance, explain purpose transparently, allow opt-out with alternative assignment..."></textarea>
                <div class="character-count"><span id="solutionsCount">0</span> / 600 characters</div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 8: Ethical Considerations -->
        <div class="section" data-section="8">
            <div class="section-header">
                <h2>Step 8: Ethical Considerations</h2>
                <p>Address privacy, equity, consent, and transparency</p>
            </div>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Critical Reflection:</strong> Every analytics implementation has ethical implications. Think carefully about power, privacy, and equity.
            </div>

            <div class="form-group">
                <label>Privacy Concerns</label>
                <span class="hint">What data privacy issues does your redesign raise?</span>
                <textarea id="privacyConcerns" placeholder="Example: Version tracking reveals WHEN students work (potentially exposing late-night cramming, procrastination patterns). This is more invasive than just seeing final product. Students may feel surveilled. Data could reveal mental health struggles (e.g., frantic editing patterns during crisis periods)..."></textarea>
            </div>

            <div class="form-group">
                <label>How Will You Address Privacy?</label>
                <span class="hint">Specific privacy protections</span>
                <textarea id="privacySolutions" placeholder="Example: (1) Clear informed consent explaining what's tracked and why; (2) Data only used for formative feedback, not punitive grading; (3) Temporal data aggregated (not shown to student with exact timestamps); (4) Data deleted after semester; (5) Option to opt out with alternative assignment (untracked writing process)..."></textarea>
            </div>

            <div class="form-group">
                <label>Equity Considerations</label>
                <span class="hint">Could this redesign advantage or disadvantage certain students?</span>
                <textarea id="equityConcerns" placeholder="Example: Students with unstable internet/technology access may struggle with collaborative editing tools. Students who work multiple jobs may have different revision patterns (condensed time) that appear less 'ideal' but aren't less thoughtful. English language learners may need more surface revision, which analytics might misinterpret as shallow engagement..."></textarea>
            </div>

            <div class="form-group">
                <label>Transparency Plan</label>
                <span class="hint">How will you ensure students understand how data is collected and used?</span>
                <textarea id="transparencyPlan" placeholder="Example: (1) Syllabus statement explaining version tracking and its pedagogical purpose; (2) First-day activity exploring sample revision data so students see what I see; (3) Mid-semester sharing of aggregated class patterns; (4) Students can view their own revision analytics; (5) Open discussion about concerns..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-primary" onclick="nextSection()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Section 9: Review & Export -->
        <div class="section" data-section="9">
            <div class="section-header">
                <h2>Step 9: Review & Export Your Plan</h2>
                <p>Review your complete redesign proposal and export it</p>
            </div>

            <div class="success-box">
                <strong>‚úÖ Proposal Complete!</strong> Review your responses below. You can edit any section by clicking "‚Üê Previous" or export your work using the options below.
            </div>

            <div class="preview-section" id="previewContent">
                <!-- Preview will be generated dynamically -->
            </div>

            <div class="export-options">
                <div class="export-card" onclick="exportHTML()">
                    <div class="icon">üåê</div>
                    <h4>HTML Document</h4>
                    <p>Formatted webpage with styling</p>
                </div>

                <div class="export-card" onclick="exportPDF()">
                    <div class="icon">üìÑ</div>
                    <h4>PDF Document</h4>
                    <p>Print-ready formatted document</p>
                </div>

                <div class="export-card" onclick="exportText()">
                    <div class="icon">üìù</div>
                    <h4>Text File</h4>
                    <p>Plain text for editing</p>
                </div>

                <div class="export-card" onclick="saveProgress()">
                    <div class="icon">üíæ</div>
                    <h4>Save Progress</h4>
                    <p>Save to continue later</p>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚Üê Previous</button>
                <button class="btn btn-success" onclick="exportPDF()">üìÑ Export as PDF</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        // State management
        let currentSection = 1;
        let formData = {
            scenario: '',
            customContext: '',
            problemDescription: '',
            evidenceDescription: '',
            dataCollection: '',
            analyticsMethods: '',
            insightsAction: '',
            designChanges: '',
            analyticsEnhancement: '',
            theories: [],
            theoryExplanation: '',
            evaluationCriteria: '',
            metrics: [],
            barriers: ['', '', ''],
            barrierSolutions: '',
            privacyConcerns: '',
            privacySolutions: '',
            equityConcerns: '',
            transparencyPlan: ''
        };

        const scenarioDetails = {
            stats: {
                title: 'Introduction to Statistics (Large Lecture)',
                context: '200 students, twice-weekly lectures, weekly problem sets, two midterms, final exam',
                currentDesign: '‚Ä¢ Lecture-based instruction\n‚Ä¢ Weekly problem sets\n‚Ä¢ Optional TA office hours\n‚Ä¢ Supplemental online resources',
                issue: 'LMS data shows 30% of students never access supplemental resources. Problem set scores decline throughout semester. No clear visibility into why students struggle.'
            },
            writing: {
                title: 'Writing Seminar (Small Discussion)',
                context: '20 students, discussion-based, four major essays with instructor feedback',
                currentDesign: '‚Ä¢ Discussion-based seminars\n‚Ä¢ Peer review workshops\n‚Ä¢ Four major essays\n‚Ä¢ Individual conferences',
                issue: 'Informal observation shows same 6 students dominate discussions. Peer review feedback is superficial and doesn\'t lead to meaningful revision.'
            },
            online: {
                title: 'Online Asynchronous Course',
                context: 'Self-paced learning modules, discussion forums, automated quizzes, final project',
                currentDesign: '‚Ä¢ Self-paced video lectures\n‚Ä¢ Weekly discussion forums\n‚Ä¢ Automated quizzes\n‚Ä¢ Final project',
                issue: 'Analytics show bimodal engagement pattern: students either highly engaged or barely present. 40% dropout rate. Difficult to identify at-risk students before they disappear.'
            },
            workshop: {
                title: 'Professional Skills Workshop',
                context: 'One-day intensive workshop on project management skills',
                currentDesign: '‚Ä¢ Mix of lecture and activities\n‚Ä¢ Group exercises\n‚Ä¢ Individual practice\n‚Ä¢ Resource handouts',
                issue: 'Follow-up survey 1 month later shows 60% of participants haven\'t applied skills learned. No analytics on in-workshop engagement or learning. No way to predict transfer.'
            },
            custom: {
                title: 'Custom Course Context',
                context: '',
                currentDesign: '',
                issue: ''
            }
        };

        // Initialize
        function init() {
            loadProgress();
            setupCharacterCounters();
            updateProgressBar();
        }

        // Scenario selection
        function selectScenario(scenario) {
            // Update UI
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            formData.scenario = scenario;
            
            // Show/hide custom input
            document.getElementById('customScenarioInput').style.display = 
                scenario === 'custom' ? 'block' : 'none';
            
            saveProgress();
        }

        // Theory selection
        function toggleTheory(element, theory) {
            element.classList.toggle('selected');
            
            const index = formData.theories.indexOf(theory);
            if (index > -1) {
                formData.theories.splice(index, 1);
            } else {
                formData.theories.push(theory);
            }
            
            saveProgress();
        }

        // Navigation
        function nextSection() {
            // Validate current section
            if (!validateSection(currentSection)) {
                return;
            }
            
            // Save current section data
            saveCurrentSection();
            
            // Move to next section
            if (currentSection < 9) {
                currentSection++;
                showSection(currentSection);
                updateProgressBar();
            }
        }

        function previousSection() {
            if (currentSection > 1) {
                saveCurrentSection();
                currentSection--;
                showSection(currentSection);
                updateProgressBar();
            }
        }

        function showSection(sectionNum) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            document.querySelector(`.section[data-section="${sectionNum}"]`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll('.step').forEach(step => {
                const stepNum = parseInt(step.dataset.step);
                step.classList.remove('active');
                if (stepNum < sectionNum) {
                    step.classList.add('completed');
                } else if (stepNum === sectionNum) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('completed');
                }
            });
            
            // Load section data if on review
            if (sectionNum === 9) {
                generatePreview();
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function updateProgressBar() {
            const progress = ((currentSection - 1) / 8) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Validation
        function validateSection(sectionNum) {
            switch(sectionNum) {
                case 1:
                    if (!formData.scenario) {
                        alert('Please select a scenario before continuing.');
                        return false;
                    }
                    if (formData.scenario === 'custom' && !document.getElementById('customContext').value.trim()) {
                        alert('Please describe your custom scenario.');
                        return false;
                    }
                    return true;
                
                case 2:
                    if (!document.getElementById('problemDescription').value.trim()) {
                        alert('Please describe what\'s not working well.');
                        return false;
                    }
                    if (!document.getElementById('evidenceDescription').value.trim()) {
                        alert('Please describe your evidence for this problem.');
                        return false;
                    }
                    return true;
                
                case 3:
                    if (!document.getElementById('dataCollection').value.trim()) {
                        alert('Please specify what data you would collect.');
                        return false;
                    }
                    if (!document.getElementById('analyticsMethods').value.trim()) {
                        alert('Please describe what analytics you would apply.');
                        return false;
                    }
                    return true;
                
                case 4:
                    if (!document.getElementById('designChanges').value.trim()) {
                        alert('Please describe your specific design changes.');
                        return false;
                    }
                    return true;
                
                case 5:
                    if (formData.theories.length === 0) {
                        alert('Please select at least one learning theory.');
                        return false;
                    }
                    if (!document.getElementById('theoryExplanation').value.trim()) {
                        alert('Please explain how theory guides your design.');
                        return false;
                    }
                    return true;
                
                case 6:
                    if (!document.getElementById('evaluationCriteria').value.trim()) {
                        alert('Please describe how you\'ll evaluate success.');
                        return false;
                    }
                    return true;
                
                case 7:
                    if (!document.getElementById('barrier1').value.trim()) {
                        alert('Please identify at least one implementation barrier.');
                        return false;
                    }
                    return true;
                
                case 8:
                    if (!document.getElementById('privacyConcerns').value.trim()) {
                        alert('Please address privacy concerns.');
                        return false;
                    }
                    return true;
                
                default:
                    return true;
            }
        }

        // Save current section data
        function saveCurrentSection() {
            // Save all form fields to formData
            formData.customContext = document.getElementById('customContext')?.value || '';
            formData.problemDescription = document.getElementById('problemDescription')?.value || '';
            formData.evidenceDescription = document.getElementById('evidenceDescription')?.value || '';
            formData.dataCollection = document.getElementById('dataCollection')?.value || '';
            formData.analyticsMethods = document.getElementById('analyticsMethods')?.value || '';
            formData.insightsAction = document.getElementById('insightsAction')?.value || '';
            formData.designChanges = document.getElementById('designChanges')?.value || '';
            formData.analyticsEnhancement = document.getElementById('analyticsEnhancement')?.value || '';
            formData.theoryExplanation = document.getElementById('theoryExplanation')?.value || '';
            formData.evaluationCriteria = document.getElementById('evaluationCriteria')?.value || '';
            formData.barriers = [
                document.getElementById('barrier1')?.value || '',
                document.getElementById('barrier2')?.value || '',
                document.getElementById('barrier3')?.value || ''
            ];
            formData.barrierSolutions = document.getElementById('barrierSolutions')?.value || '';
            formData.privacyConcerns = document.getElementById('privacyConcerns')?.value || '';
            formData.privacySolutions = document.getElementById('privacySolutions')?.value || '';
            formData.equityConcerns = document.getElementById('equityConcerns')?.value || '';
            formData.transparencyPlan = document.getElementById('transparencyPlan')?.value || '';
            
            // Save metrics
            formData.metrics = [];
            document.querySelectorAll('.checkbox-item input[type="checkbox"]:checked').forEach(cb => {
                formData.metrics.push(cb.value);
            });
            
            saveProgress();
        }

        // Character counters
        function setupCharacterCounters() {
            const counters = [
                { input: 'problemDescription', counter: 'problemCount', max: 500 },
                { input: 'evidenceDescription', counter: 'evidenceCount', max: 400 },
                { input: 'dataCollection', counter: 'dataCount', max: 500 },
                { input: 'analyticsMethods', counter: 'analyticsCount', max: 400 },
                { input: 'insightsAction', counter: 'insightsCount', max: 450 },
                { input: 'designChanges', counter: 'designCount', max: 600 },
                { input: 'analyticsEnhancement', counter: 'enhancementCount', max: 500 },
                { input: 'theoryExplanation', counter: 'theoryCount', max: 500 },
                { input: 'evaluationCriteria', counter: 'evalCount', max: 450 },
                { input: 'barrierSolutions', counter: 'solutionsCount', max: 600 }
            ];
            
            counters.forEach(c => {
                const input = document.getElementById(c.input);
                if (input) {
                    input.addEventListener('input', function() {
                        const counter = document.getElementById(c.counter);
                        if (counter) {
                            counter.textContent = this.value.length;
                            if (this.value.length > c.max) {
                                counter.style.color = '#e74c3c';
                            } else {
                                counter.style.color = '#7f8c8d';
                            }
                        }
                    });
                }
            });
        }

        // Generate preview
        function generatePreview() {
            const preview = document.getElementById('previewContent');
            const scenario = scenarioDetails[formData.scenario] || scenarioDetails.custom;
            
            let html = `
                <div class="preview-item">
                    <h3>üìö ${formData.scenario === 'custom' ? 'Custom Course Context' : scenario.title}</h3>
                    ${formData.scenario === 'custom' ? 
                        `<p><strong>Context:</strong> ${formData.customContext}</p>` :
                        `<p><strong>Context:</strong> ${scenario.context}</p>`
                    }
                </div>

                <div class="preview-item">
                    <h4>1. Problem Identified</h4>
                    <p>${formData.problemDescription}</p>
                    <p><strong>Evidence:</strong> ${formData.evidenceDescription}</p>
                </div>

                <div class="preview-item">
                    <h4>2. Analytics to Collect</h4>
                    <p><strong>Data Collection:</strong> ${formData.dataCollection}</p>
                    <p><strong>Analytics Methods:</strong> ${formData.analyticsMethods}</p>
                    <p><strong>Insights ‚Üí Actions:</strong> ${formData.insightsAction}</p>
                </div>

                <div class="preview-item">
                    <h4>3. Design Change</h4>
                    <p>${formData.designChanges}</p>
                    <p><strong>Analytics Role:</strong> ${formData.analyticsEnhancement}</p>
                </div>

                <div class="preview-item">
                    <h4>4. Theory Informing Design</h4>
                    <p><strong>Theories:</strong> ${formData.theories.join(', ')}</p>
                    <p>${formData.theoryExplanation}</p>
                </div>

                <div class="preview-item">
                    <h4>5. Evaluation Plan</h4>
                    <p>${formData.evaluationCriteria}</p>
                    ${formData.metrics.length > 0 ? 
                        `<p><strong>Metrics:</strong></p><ul>${formData.metrics.map(m => `<li>${m}</li>`).join('')}</ul>` : 
                        ''
                    }
                </div>

                <div class="preview-item">
                    <h4>6. Implementation Challenges</h4>
                    <p><strong>Top Barriers:</strong></p>
                    <ul>
                        ${formData.barriers.filter(b => b).map(b => `<li>${b}</li>`).join('')}
                    </ul>
                    <p><strong>Solutions:</strong> ${formData.barrierSolutions}</p>
                </div>

                <div class="preview-item">
                    <h4>7. Ethical Considerations</h4>
                    <p><strong>Privacy Concerns:</strong> ${formData.privacyConcerns}</p>
                    <p><strong>Privacy Solutions:</strong> ${formData.privacySolutions}</p>
                    <p><strong>Equity Considerations:</strong> ${formData.equityConcerns}</p>
                    <p><strong>Transparency:</strong> ${formData.transparencyPlan}</p>
                </div>
            `;
            
            preview.innerHTML = html;
        }

        // Export functions
        function exportHTML() {
            saveCurrentSection();
            const scenario = scenarioDetails[formData.scenario] || scenarioDetails.custom;
            
            const html = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Redesign Proposal</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
            color: #2c3e50;
        }
        h1 { color: #3498db; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #2980b9; margin-top: 30px; }
        h3 { color: #34495e; margin-top: 20px; }
        .section { margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; }
        .label { font-weight: bold; color: #2980b9; margin-top: 15px; display: block; }
        ul { margin-left: 20px; }
        .date { text-align: right; color: #7f8c8d; font-style: italic; }
    </style>
</head>
<body>
    <h1>Data-Informed Course Redesign Proposal</h1>
    <p class="date">Generated: ${new Date().toLocaleDateString()}</p>
    
    <div class="section">
        <h2>Course Context</h2>
        <h3>${formData.scenario === 'custom' ? 'Custom Course' : scenario.title}</h3>
        <p>${formData.scenario === 'custom' ? formData.customContext : scenario.context}</p>
    </div>

    <div class="section">
        <h2>1. Problem Identification</h2>
        <span class="label">What's Not Working:</span>
        <p>${formData.problemDescription}</p>
        <span class="label">Evidence:</span>
        <p>${formData.evidenceDescription}</p>
    </div>

    <div class="section">
        <h2>2. Analytics Integration Plan</h2>
        <span class="label">Data to Collect:</span>
        <p>${formData.dataCollection}</p>
        <span class="label">Analytics Methods:</span>
        <p>${formData.analyticsMethods}</p>
        <span class="label">How Insights Inform Design:</span>
        <p>${formData.insightsAction}</p>
    </div>

    <div class="section">
        <h2>3. Redesign Proposal</h2>
        <span class="label">Specific Design Changes:</span>
        <p>${formData.designChanges}</p>
        <span class="label">Analytics Enhancement:</span>
        <p>${formData.analyticsEnhancement}</p>
    </div>

    <div class="section">
        <h2>4. Theoretical Foundation</h2>
        <span class="label">Learning Theories:</span>
        <p>${formData.theories.join(', ')}</p>
        <span class="label">Theoretical Explanation:</span>
        <p>${formData.theoryExplanation}</p>
    </div>

    <div class="section">
        <h2>5. Evaluation Plan</h2>
        <span class="label">Success Criteria:</span>
        <p>${formData.evaluationCriteria}</p>
        ${formData.metrics.length > 0 ? `
            <span class="label">Metrics to Track:</span>
            <ul>${formData.metrics.map(m => `<li>${m}</li>`).join('')}</ul>
        ` : ''}
    </div>

    <div class="section">
        <h2>6. Implementation Challenges</h2>
        <span class="label">Top Barriers:</span>
        <ul>
            ${formData.barriers.filter(b => b).map(b => `<li>${b}</li>`).join('')}
        </ul>
        <span class="label">Solutions:</span>
        <p>${formData.barrierSolutions}</p>
    </div>

    <div class="section">
        <h2>7. Ethical Considerations</h2>
        <span class="label">Privacy Concerns:</span>
        <p>${formData.privacyConcerns}</p>
        <span class="label">Privacy Solutions:</span>
        <p>${formData.privacySolutions}</p>
        <span class="label">Equity Considerations:</span>
        <p>${formData.equityConcerns}</p>
        <span class="label">Transparency Plan:</span>
        <p>${formData.transparencyPlan}</p>
    </div>
</body>
</html>`;

            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'course_redesign_proposal.html';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('‚úÖ HTML document downloaded!');
        }

        function exportPDF() {
            saveCurrentSection();
            generatePreview();
            
            const element = document.getElementById('previewContent');
            const scenario = scenarioDetails[formData.scenario] || scenarioDetails.custom;
            
            // Create a wrapper with title
            const wrapper = document.createElement('div');
            wrapper.style.padding = '20px';
            wrapper.innerHTML = `
                <h1 style="color: #3498db; text-align: center; margin-bottom: 10px;">Data-Informed Course Redesign Proposal</h1>
                <p style="text-align: center; color: #7f8c8d; margin-bottom: 30px;">Generated: ${new Date().toLocaleDateString()}</p>
                ${element.innerHTML}
            `;
            
            const opt = {
                margin: 0.5,
                filename: 'course_redesign_proposal.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            
            html2pdf().set(opt).from(wrapper).save().then(() => {
                alert('‚úÖ PDF exported successfully!');
            });
        }

        function exportText() {
            saveCurrentSection();
            const scenario = scenarioDetails[formData.scenario] || scenarioDetails.custom;
            
            const text = `DATA-INFORMED COURSE REDESIGN PROPOSAL
Generated: ${new Date().toLocaleDateString()}

==========================================
COURSE CONTEXT
==========================================
${formData.scenario === 'custom' ? 'Custom Course' : scenario.title}
${formData.scenario === 'custom' ? formData.customContext : scenario.context}

==========================================
1. PROBLEM IDENTIFICATION
==========================================
What's Not Working:
${formData.problemDescription}

Evidence:
${formData.evidenceDescription}

==========================================
2. ANALYTICS INTEGRATION PLAN
==========================================
Data to Collect:
${formData.dataCollection}

Analytics Methods:
${formData.analyticsMethods}

How Insights Inform Design:
${formData.insightsAction}

==========================================
3. REDESIGN PROPOSAL
==========================================
Specific Design Changes:
${formData.designChanges}

Analytics Enhancement:
${formData.analyticsEnhancement}

==========================================
4. THEORETICAL FOUNDATION
==========================================
Learning Theories:
${formData.theories.join(', ')}

Explanation:
${formData.theoryExplanation}

==========================================
5. EVALUATION PLAN
==========================================
Success Criteria:
${formData.evaluationCriteria}

Metrics to Track:
${formData.metrics.map(m => `- ${m}`).join('\n')}

==========================================
6. IMPLEMENTATION CHALLENGES
==========================================
Top Barriers:
${formData.barriers.filter(b => b).map((b, i) => `${i+1}. ${b}`).join('\n')}

Solutions:
${formData.barrierSolutions}

==========================================
7. ETHICAL CONSIDERATIONS
==========================================
Privacy Concerns:
${formData.privacyConcerns}

Privacy Solutions:
${formData.privacySolutions}

Equity Considerations:
${formData.equityConcerns}

Transparency Plan:
${formData.transparencyPlan}
`;

            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'course_redesign_proposal.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('‚úÖ Text file downloaded!');
        }

        // Progress saving
        function saveProgress() {
            localStorage.setItem('courseRedesignData', JSON.stringify(formData));
            localStorage.setItem('courseRedesignSection', currentSection.toString());
        }

        function loadProgress() {
            const savedData = localStorage.getItem('courseRedesignData');
            const savedSection = localStorage.getItem('courseRedesignSection');
            
            if (savedData) {
                formData = JSON.parse(savedData);
                
                // Restore form values
                if (formData.customContext) document.getElementById('customContext').value = formData.customContext;
                if (formData.problemDescription) document.getElementById('problemDescription').value = formData.problemDescription;
                if (formData.evidenceDescription) document.getElementById('evidenceDescription').value = formData.evidenceDescription;
                if (formData.dataCollection) document.getElementById('dataCollection').value = formData.dataCollection;
                if (formData.analyticsMethods) document.getElementById('analyticsMethods').value = formData.analyticsMethods;
                if (formData.insightsAction) document.getElementById('insightsAction').value = formData.insightsAction;
                if (formData.designChanges) document.getElementById('designChanges').value = formData.designChanges;
                if (formData.analyticsEnhancement) document.getElementById('analyticsEnhancement').value = formData.analyticsEnhancement;
                if (formData.theoryExplanation) document.getElementById('theoryExplanation').value = formData.theoryExplanation;
                if (formData.evaluationCriteria) document.getElementById('evaluationCriteria').value = formData.evaluationCriteria;
                if (formData.barriers[0]) document.getElementById('barrier1').value = formData.barriers[0];
                if (formData.barriers[1]) document.getElementById('barrier2').value = formData.barriers[1];
                if (formData.barriers[2]) document.getElementById('barrier3').value = formData.barriers[2];
                if (formData.barrierSolutions) document.getElementById('barrierSolutions').value = formData.barrierSolutions;
                if (formData.privacyConcerns) document.getElementById('privacyConcerns').value = formData.privacyConcerns;
                if (formData.privacySolutions) document.getElementById('privacySolutions').value = formData.privacySolutions;
                if (formData.equityConcerns) document.getElementById('equityConcerns').value = formData.equityConcerns;
                if (formData.transparencyPlan) document.getElementById('transparencyPlan').value = formData.transparencyPlan;
                
                // Restore scenario selection
                if (formData.scenario) {
                    const card = document.querySelector(`.scenario-card[onclick*="${formData.scenario}"]`);
                    if (card) card.classList.add('selected');
                }
            }
            
            if (savedSection) {
                currentSection = parseInt(savedSection);
                showSection(currentSection);
            }
        }

        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>